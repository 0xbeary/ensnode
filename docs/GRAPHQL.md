# graphql info/spec

## goals

1. ponder indexer 1:1 equivalency of results as compared to subgraph
  1. support for the ~10 well-defined graphql queries sourced from ensjs, ens-app-v3
  2. support for exhaustive collection queries to support snapshot equivalency tool
2. indexer snapshot equivalency via comprehensive graphql diffs
3. proxy equivalency tool
4. 100% ensjs, ens-app-v3 test suites passing via proxy equivalency tool

## ponder indexer

the ponder indexer will implement a custom graphql server and support the queries mentioned above.

initially it should implement the collection queries necessary to support `snapshot-eq`

notable work includes matching the subgraph's schema, pagination scheme, and complex filter support.
we can likely use [ponder's autogenerated graphql api](https://github.com/ponder-sh/ponder/blob/main/packages/core/src/graphql/index.ts) as a starting point—along with [`drizzle-graphql`'s](https://github.com/drizzle-team/drizzle-graphql/blob/main/src/util/builders/pg.ts#L390)— _perhaps_ shoving them into an LLM to generate logic that more closely matches thegraph's generated schema. it may or may not be easier to remove the table-level metaprogramming because our top-level query fields are well-known, TBD. we'll also want to use dataloader exactly as ponder does.

we will implement [a hono middleware much like ponder's](https://github.com/ponder-sh/ponder/blob/0a5645ca8dec327b0c21da432ee00810edeb087c/packages/core/src/graphql/middleware.ts#L23) using graphql-yoga to execute the generated schema

